define(["require","exports","lib/function_helpers"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={getPixelsWidgetGeometry:function(e,t,n){var i=r.default.getUnitStyle(n),o=0,a=parseFloat(n);return o="px"===i?a:parseFloat(this.convertUnitsToPixel(e,n,t)),{originalUnit:i,pixels:o}},convertPixelToUnit:function(e,t,n,i){var o;switch(o="fontSize"!==i||isNaN(t)?"auto"!==t?parseFloat(t):0:r.default.getSceneFontSize(),n){case"vw":return this.convertPixelToVw(o)+n;case"vh":return this.convertPixelToVh(o)+n;case"vmin":return this.convertPixelToVmin(o)+n;case"vmax":return this.convertPixelToVmax(o)+n;case"pt":return this.convertPixelToPt(o)+n;case"rem":return this.convertPixelToRem(o)+n;case"%":return this.pixelToPercentHandling(e,o,i)+n;case"auto":return n;default:return o+"px"}},convertUnitsToPixel:function(e,t,n){void 0===n&&(n=null);var i,o=r.default.getUnitStyle(t);if("fontSize"===n&&"auto"===t)return"16px";switch(i=parseFloat(t),o){case"vw":return this.convertVwToPixel(i)+"px";case"vh":return this.convertVhToPixel(i)+"px";case"vmin":return this.convertVminToPixel(i)+"px";case"vmax":return this.convertVmaxToPixel(i)+"px";case"pt":return this.convertPtToPixel(i)+"px";case"rem":return this.convertRemToPixel(i)+"px";case"%":return this.percentToPixelHandling(e,i,n)+"px";case"auto":return o;default:return i+"px"}},percentToPixelHandling:function(e,t,n){var i,o=document.getElementById(e);if("top"===n||"height"===n)i=parseFloat(this.convertUnitsToPixel(o.parentElement.id,o.parentElement.style.height,n));else if("left"===n||"width"===n)i=parseFloat(this.convertUnitsToPixel(o.parentElement.id,o.parentElement.style.width,n));else if("backgroundPositionX"===n||"-webkit-mask-position-x"===n||"backgroundSizeWidth"===n||"transform-origin-x"===n||"perspective-origin-x"===n||"translateX"===n||"-webkit-mask-sizeWidth"===n){var a=o.style.width;"%"===(s=r.default.getUnitStyle(a))&&(a=this.convertUnitsToPixel(o.id,o.style.width,"width")),i=parseFloat(a)}else if("backgroundPositionY"===n||"-webkit-mask-position-y"===n||"backgroundSizeHeight"===n||"transform-origin-y"===n||"perspective-origin-y"===n||"translateY"===n||"-webkit-mask-sizeHeight"===n){var l=o.style.height,s=r.default.getUnitStyle(l);"%"===s&&(l=this.convertUnitsToPixel(o.id,o.style.height,"height")),i=parseFloat(l)}return this.convertPercentToPixel(t,i)},pixelToPercentHandling:function(e,t,n){var i,o=document.getElementById(e),a=r.default.getAbsolutePosition(o,o.parentElement.id);if("top"===n)return i=parseFloat(getComputedStyle(o.parentElement,null).getPropertyValue("height")),this.convertPixelToPercent(a.top,i);if("left"===n)return i=parseFloat(getComputedStyle(o.parentElement,null).getPropertyValue("width")),this.convertPixelToPercent(a.left,i);if("width"===n){var l=parseFloat(getComputedStyle(o.parentElement,null).getPropertyValue("width")),s=getComputedStyle(o,null).getPropertyValue("width");return"%"===r.default.getUnitStyle(s)&&(s=this.convertPercentToPixel(parseFloat(s),l)),this.convertPixelToPercent(parseFloat(s),l)}if("height"===n){var u=parseFloat(getComputedStyle(o.parentElement,null).getPropertyValue("height")),c=getComputedStyle(o,null).getPropertyValue("height");return"%"===r.default.getUnitStyle(c)&&(c=this.convertPercentToPixel(parseFloat(c),u)),this.convertPixelToPercent(parseFloat(c),u)}if("backgroundSizeWidth"===n||"backgroundPositionX"===n||"transform-origin-x"===n||"perspective-origin-x"===n||"translateX"===n||"-webkit-mask-sizeWidth"===n){var h=getComputedStyle(o,null).getPropertyValue("width");return this.convertPixelToPercent(t,parseFloat(h))}if("backgroundSizeHeight"===n||"backgroundPositionY"===n||"transform-origin-y"===n||"perspective-origin-y"===n||"translateY"===n||"-webkit-mask-sizeHeight"===n){var p=getComputedStyle(o,null).getPropertyValue("height");return this.convertPixelToPercent(t,parseFloat(p))}},convertVwToPixel:function(e){var t=r.default.getSceneSize();return parseFloat(e)*t.width/100},convertVhToPixel:function(e){var t=r.default.getSceneSize();return parseFloat(e)*t.height/100},convertVmaxToPixel:function(e){var t=r.default.getSceneSize(),n=t.height,i=t.width,o=n>i?n:i;return parseFloat(e)*o/100},convertVminToPixel:function(e){var t=r.default.getSceneSize(),n=t.height,i=t.width,o=n>i?i:n;return parseFloat(e)*o/100},convertPtToPixel:function(e){return 4*parseFloat(e)/3},convertPixelToRem:function(e){var t=r.default.getSceneFontSize();return parseFloat(e)/t},convertRemToPixel:function(e){var t=r.default.getSceneFontSize();return parseFloat(e)*t},convertPixelToVh:function(e){return 100/r.default.getSceneSize().height*e},convertPixelToVw:function(e){return 100/r.default.getSceneSize().width*e},convertPixelToVmin:function(e){var t=r.default.getSceneSize(),n=t.height,i=t.width;return 100/(n>i?i:n)*e},convertPixelToVmax:function(e){var t=r.default.getSceneSize(),n=t.height,i=t.width;return 100/(n>i?n:i)*e},convertPixelToPt:function(e){return parseFloat(e)/4*3},convertPixelToPercent:function(e,t){return parseFloat(e)/parseFloat(t)*100},convertPercentToPixel:function(e,t){return parseFloat(t)*parseFloat(e)/100},toDegrees:function(e){return parseFloat(e)*(180/Math.PI)},toRadians:function(e){return parseFloat(e)*(Math.PI/180)}}});